@model IEnumerable<MapProject.Models.LocationViewModel>
@{
    ViewBag.Title = "Index";
}
<div id="top">
    <div id="row" class="row">
        <div id="right-panel" class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <div>
                <br>
                <input type="submit" id="submit">
            </div>
            <div id="directions-panel"></div>
            <ul id="locationlist">
                @foreach (var item in Model)
                {
                    if (Model.First() == item)
                    { }
                    else
                    {
                        <hr>
                    }

                    <li class="listItem row">
                        @*<input type="checkbox" class="checkbox" id="_checkbox_btn" value="@Html.DisplayFor(modelItem => item.Latitude),@Html.DisplayFor(modelItem => item.Longitude)" />*@

                        <img id="thumbimg" class="img-thumbnail col-xs-5 col-sm-5 col-md-5 col-lg-5" src="@Html.DisplayFor(modelItem => item.Picture)">
                        <div id="text" class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
                            @Html.DisplayFor(modelItem => item.Name)<br>
                            @Html.DisplayFor(modelItem => item.Latitude)<br>
                            @Html.DisplayFor(modelItem => item.Longitude)<br>
                            @Html.DisplayFor(modelItem => item.Time)<text> Mins</text><br>
                        </div>
                        @*<div id="checkbox" class="col-xs-1 col-sm-1 col-md-1 col-lg-1">
                            <input type="checkbox" class="checkbox" id="_checkbox_btn" value="@Html.DisplayFor(modelItem => item.Latitude),@Html.DisplayFor(modelItem => item.Longitude)" />
                        </div>*@
                        <br><br />
                    </li>
                }
            </ul>
        </div>
        <div id="form" class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
            @Html.Partial("_AddPlace", new MapProject.Models.LocationViewModel())
        </div>
        <div id="map" class="col-xs-4 col-sm-4 col-md-4 col-lg-4"></div>
        
    </div>
</div>
<script>
        function initMap() {
            var directionsService = new google.maps.DirectionsService;
            var directionsDisplay = new google.maps.DirectionsRenderer;
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: { lat: 54.27, lng: -8.47 }
            });
            directionsDisplay.setMap(map);

            document.getElementById('submit').addEventListener('click', function () {
                calculateAndDisplayRoute(directionsService, directionsDisplay);
            });

            google.maps.event.addListener(map, 'click', function (event) {
                var lat = event.latLng.lat();
                var long = event.latLng.lng();
                //alert('Lat: ' + lat + ' and Longitude is: ' + long);
                $('#Latitude').attr('value', lat.toFixed(7));
                $('#Longitude').attr('value', long.toFixed(5));

                placeMarker(event.latLng, map);
                var latitude = event.latLng.lat();
                var longitude = event.latLng.lng();
                //map.panTo(new google.maps.LatLng(latitude, longitude));
            });
        }
        function placeMarker(position, map) {
            var marker = new google.maps.Marker({
                position: position,
                map: map
            });
            map.panTo(position);
        }
        $(document).ready(function () {
            //$(".container.body-content").css("min-width", "1300px");
            $("footer").hide();
            $('#Latitude').prop("readOnly", true);
            $('#Longitude').prop("readOnly", true);
        });
</script>


<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBw_b25ZsVxp4GvOal3ImsezOFWLU-PMyw&libraries=places&callback=initMap">
</script>
